# –û—Ç–ª–∞–¥–∫–∞ RAG –ø–æ–∏—Å–∫–∞ - –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. Frontend (App.tsx)
- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `handleSend` —Å –ø–æ–ª–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º RAG
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `handleSelectConversation`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ lint errors
- ‚úÖ –ö–æ–¥ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

### 2. Backend (rag_engine.py)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∏—Å–∫–∞
- ‚úÖ QueryExpander —Å fuzzy matching —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –î–∞–Ω–Ω—ã–µ –æ "–ì–∞–¥–∞–¥—Ö–∞—Ä–µ" –Ω–∞–π–¥–µ–Ω—ã –≤ –∏–Ω–¥–µ–∫—Å–µ (10 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, score 0.66+)

### 3. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- ‚úÖ –§–∞–π–ª—ã RAG –¥–∞–Ω–Ω—ã—Ö —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –≤ .gitignore
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `geminiService.ts`

## üîç –ß—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ

1. **–î–∞–Ω–Ω—ã–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç**: –ü–æ–∏—Å–∫ "–ì–∞–¥–∞–¥—Ö–∞—Ä–∞" –≤ `chunked_scriptures_ru.json` –Ω–∞—Ö–æ–¥–∏—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —É–ø–æ–º–∏–Ω–∞–Ω–∏–π
2. **–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç**: FAISS –∏–Ω–¥–µ–∫—Å —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–µ–∫—Ç–æ—Ä—ã –¥–ª—è —ç—Ç–∏—Ö –¥–∞–Ω–Ω—ã—Ö
3. **–ü–æ–∏—Å–∫ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç**: RAG –¥–≤–∏–∂–æ–∫ –Ω–∞—Ö–æ–¥–∏—Ç 10 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å —Ö–æ—Ä–æ—à–∏–º–∏ –æ—Ü–µ–Ω–∫–∞–º–∏

## üß™ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API –Ω–∞–ø—Ä—è–º—É—é
```bash
.\venv\Scripts\python.exe test_api_direct.py
```
–≠—Ç–æ –ø–æ–∫–∞–∂–µ—Ç, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç Flask API —Å–µ—Ä–≤–µ—Ä.

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å frontend
1. –û—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä –Ω–∞ http://localhost:5173
2. –û—Ç–∫—Ä—ã—Ç—å Developer Tools (F12) -> Console
3. –í–≤–µ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å: "–ì–∞–¥–∞–¥—Ö–∞—Ä–∞ –ü–∞–Ω–¥–∏—Ç"
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏:
   - `üîç RAG Search Response:` - —á—Ç–æ –ø—Ä–∏—à–ª–æ –æ—Ç backend
   - `üìö First result sample:` - –æ–±—Ä–∞–∑–µ—Ü –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –ø–æ—è–≤–∏–ª–∏—Å—å –≤ –ø—Ä–∞–≤–æ–π –ø–∞–Ω–µ–ª–∏ "Sources"
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–Ω–æ–ø–∫—É "Read Full" –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

–ï—Å–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è:
1. **–ü—Ä–æ–±–ª–µ–º–∞ —Å API**: —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–µ –¥–æ—Ö–æ–¥—è—Ç –æ—Ç Python –¥–æ frontend
2. **–ü—Ä–æ–±–ª–µ–º–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏**: –¥–∞–Ω–Ω—ã–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ SourceChunk
3. **–ü—Ä–æ–±–ª–µ–º–∞ UI**: –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

## üìù –î–µ—Ç–∞–ª–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### Backend –ª–æ–≥ (–≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Å rag_api_server.py):
```
üîç –ü–æ–∏—Å–∫: '–ì–∞–¥–∞–¥—Ö–∞—Ä–∞ –ü–∞–Ω–¥–∏—Ç' (ru, top_k=5)
   üìã –í–∞—Ä–∏–∞–Ω—Ç—ã –∑–∞–ø—Ä–æ—Å–∞: ['–ì–∞–¥–∞–¥—Ö–∞—Ä–∞ –ü–∞–Ω–¥–∏—Ç']
   üî¢ –ü–æ–ª—É—á–µ–Ω–æ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤: (1, 768)
   üîé –í–∞—Ä–∏–∞–Ω—Ç '–ì–∞–¥–∞–¥—Ö–∞—Ä–∞ –ü–∞–Ω–¥–∏—Ç': –Ω–∞–π–¥–µ–Ω–æ 10 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
      - Score: 0.6631, Text preview: ...
```

### Frontend –ª–æ–≥ (–≤ console –±—Ä–∞—É–∑–µ—Ä–∞):
```
üîç RAG Search Response: { success: true, resultCount: 5, ... }
üìö First result sample: { book: "...", chapter: "...", ... }
```
